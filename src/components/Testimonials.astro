---
import { ChevronLeft, ChevronRight } from "lucide-astro";
---

<section id="Testimonials" class="section-padding section-reveal">
  <div class="p-4 md:p-8">
    <div class="header-container flex justify-between items-center mb-4">
      <h1 class="title-reveal w-full text-blue" data-translate="testimonials.title">Histórias Que Inspiram: Nossos Clientes Falam.</h1>
      
      <div class="carousel-controls flex-shrink-0"> 
        <button class="carousel-btn carousel-btn-prev text-blue" id="prevBtnTestimonials" style="display: none;">
          <ChevronLeft size={20} />
        </button>
        <button class="carousel-btn carousel-btn-next text-blue" id="nextBtnTestimonials">
          <ChevronRight size={20} />
        </button>
      </div>
    </div>
    
 <div class="carousel-wrapper-outer relative">
  <div class="carousel-container overflow-hidden relative z-10 pb-8">
    <div class="carousel-track flex transition-transform duration-500 ease-in-out pb-4 items-stretch" id="testimonials-track">
      
      <!-- 1. Nicolas Leal -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.nicolas.quote">"Fez um City tour - Ciudad del Este (Paraguai) com compras, guiado por Luiz. Experiência super agradável, guia atencioso, disponível e prestativo, com um roteiro bem feito e muitas curiosidades históricas. Carro confortável, com ar-condicionado e água. Super recomenda!"</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.nicolas.name">Nicolas Leal</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.nicolas.role">Cliente Satisfeito</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 2. Lara B. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.lara.quote">"Os passeios foram feitos com o casal Luiz e Natacha. Destaca o transporte pontual e confortável, a atuação como guias atenciosos, simpáticos e bem preparados, com profundo conhecimento dos pontos turísticos."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.lara.name">Lara B.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.lara.role">Viajante</p>
            </div>
            <a href='https://www.google.com/travel' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.google">Avaliar no Google</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 3. Antônio Carlos L. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.antonio.quote">"Viagem memorável de 5 dias para Foz do Iguaçu, Argentina e Paraguai. O guia Luiz foi peça chave, profissional extremamente competente, com vasto conhecimento (história, geologia, antropologia), pontual, bem-humorado, direção segura e veículo confortável e limpo."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.antonio.name">Antônio Carlos L.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.antonio.role">Viajante</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 4. Sandro B. (primeira aparição) -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.sandro.quote">"Casal nota 1.000! Os passeios foram incríveis, com as informações passadas pelo casal Luiz e Natacha. Um aprendizado sobre as culturas regionais que se tornou surreal. O casal é natural de Foz."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.sandro.name">Sandro B.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.sandro.role">Cliente Satisfeito</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 5. Bruno C. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.bruno.quote">"Excelência no atendimento. Saí de Foz do Iguaçu com o sentimento de ter feito um amigo, não apenas contratado um guia. Luiz Boni demonstrou carinho, zelo e comprometimento."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.bruno.name">Bruno C.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.bruno.role">Cliente Satisfeito</p>
            </div>
            <a href='https://www.google.com/travel' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.google">Avaliar no Google</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 6. Albano R. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.albano.quote">"Experiência inesquecível em Foz do Iguaçu. Luiz foi discreto, educado, prestativo e pontual. Recomendações e dicas sobre refeições, passeios e roteiros foram muito bem elaboradas."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.albano.name">Albano R.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.albano.role">Viajante</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 7. Ana Claudia M. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.anaclaudia.quote">"Viver a experiência em Foz do Iguaçu na companhia da Natacha foi inesquecível e muito agradável. Atenciosa e preocupada com o bem-estar, demonstrando muito conhecimento em cada ponto de visitação."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.anaclaudia.name">Ana Claudia M.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.anaclaudia.role">Cliente Satisfeita</p>
            </div>
            <a href='https://www.google.com/travel' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.google">Avaliar no Google</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 8. Luiz C. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.luizc.quote">"Guia excepcional! Experiência incrível, simpático e muito bem informado. Luiz Boni ofereceu um tour com muita informação, indicações precisas em um veículo confortável com água mineral. O melhor guia das três fronteiras."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.luizc.name">Luiz C.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.luizc.role">Viajante</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 9. Amzar A. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.amzar.quote">"Viagem reservada com Natacha. Planejamento via WhatsApp com clareza e transparência de custos. Natacha foi pontual e, o mais importante, muito familiarizada com a história e os fatos. Uma grande experiência!"</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.amzar.name">Amzar A.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.amzar.role">Cliente Satisfeito</p>
            </div>
            <a href='https://www.google.com/travel' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.google">Avaliar no Google</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 10. Marlon S. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.marlon.quote">"Excelentemente bem atendidos de forma profissional e acolhedora. Nosso filho ficou contente com o carinho e atenção. Recomendo absolutamente os serviços: traslado, passeios, cordialidade, pontualidade e sugestões assertivas."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.marlon.name">Marlon S.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.marlon.role">Cliente Satisfeito</p>
            </div>
            <a href='https://www.tripadvisor.com.br/Attraction_Review-g303444-d17724059-Reviews-Bni_Tour-Foz_do_Iguacu_State_of_Parana.html' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.tripadvisor">Ver no Tripadvisor</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- 11. Ana Paula T. -->
      <div class="testimonial-card testimonial-reveal flex-none">
        <div class="testimonial-content p-4 bg-white rounded-lg shadow-md hover:shadow-lg flex flex-col">
          <p class="text-gray-700 text-lg mb-4 flex-grow" data-translate="testimonials.anapaula.quote">"Tive a sorte de contar com a expertise de Luiz para otimizar os passeios. Tour completo pelas Cataratas, helicóptero e macuco safari. Luiz foi solicito, cordial e ajudou a registrar os passeios com fotos e vídeos."</p>
          <div class="flex flex-col 2xl:flex-row 2xl:items-center 2xl:justify-between gap-3 mt-auto">
            <div class="flex-shrink-0">
              <p class="font-semibold text-gray-900" data-translate="testimonials.anapaula.name">Ana Paula T.</p>
              <p class="text-sm text-gray-500" data-translate="testimonials.anapaula.role">Viajante</p>
            </div>
            <a href='https://www.google.com/travel' class="btn-nav header-btn 2xl:self-auto self-start">
              <span class="button-content-initial-text text-blue" data-translate="testimonials.btn.google">Avaliar no Google</span>
              <div class="btn-cta-icon-wrapper button-content-initial-icon bg-white">
                <ChevronRight size={20} class="text-blue" />
              </div>
            </a>
          </div>
        </div>
      </div>
   
      
    </div>
  </div>
</div>
  </div>
</section>

<style>
/* Estilos para .btn-nav, incorporando a definição anterior de .btn-cta */
.btn-nav {
    display: inline-flex;
    align-items: center;
    border-radius: 9999px; /* rounded-full */
    font-weight: 500; /* font-medium */
    transition-property: all;
    transition-duration: 300ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); /* ease-in-out */
    outline: 2px solid transparent; /* focus:outline-none */
    outline-offset: 2px;
    border-width: 1px;
    border-color: white; /* border-white */
    background-color: transparent; /* bg-transparent */
    backdrop-filter: blur(8px); /* backdrop-blur-md */
    cursor: pointer;
    overflow: hidden;
    padding-left: 0.75rem; /* pl-3 */
    padding-right: 0; /* pr-0 */
    gap: 1rem; /* gap-x-4 */
    position: relative;
    min-height: 40px;
}
@media (min-width: 1024px) {
  .btn-nav {
    gap: 2rem; /* lg:gap-x-8 */
  }
}

html, body {
  overflow-x: hidden !important;
  max-width: 100vw !important;
}

@media (max-width: 768px) {
  .header-container {
    position: relative;
    margin-bottom: 120px;
    flex-direction: column;
    align-items: flex-start;
  }
  
  .header-container h1 {
    width: 100% !important;
  }
  
  .carousel-controls {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 60px; 
  }
  
  .carousel-container {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    overflow: hidden !important;
  }
  
  .carousel-track {
    display: flex;
    transition: transform 0.3s ease;
    gap: 0;
  }
  
  .testimonial-card {
    flex: 0 0 100vw;
    width: 100vw;
    padding: 0 20px;
    box-sizing: border-box;
  }
  
  .testimonial-content {
    border-radius: 0 !important;
    min-height: 320px;
  }
}

@media (min-width: 769px) and (max-width: 1023px) {
  .header-container {
    flex-direction: row;
    margin-bottom: 2rem;
  }
  
  .carousel-track {
    gap: 1.5rem;
  }
  
  .testimonial-card {
    width: calc(50% - 0.75rem);
  }
}

/* Desktop Layout - 3+ cards */
@media (min-width: 1024px) {
  .header-container {
    flex-direction: row;
    margin-bottom: 2rem;
  }
  
  .carousel-track {
    gap: 1rem;
  }
  
  .testimonial-card {
    width: calc(33.333% - 0.667rem);
  }
}

@media (min-width: 1280px) {
  .testimonial-card {
    width: calc(25% - 0.75rem);
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const testimonialSection = document.getElementById('Testimonials');
  if (!testimonialSection) return;

  const sections = document.querySelectorAll('.section-reveal');
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('section-reveal-active');
        
        setTimeout(() => {
          const titles = entry.target.querySelectorAll('.title-reveal');
          titles.forEach((title, index) => {
            setTimeout(() => { 
              title.classList.add('is-visible');
            }, index * 200); 
          });
        }, 400);
        
        setTimeout(() => {
          const cards = entry.target.querySelectorAll('.testimonial-reveal');
          cards.forEach((card, index) => {
            setTimeout(() => {
              card.classList.add('is-visible');
            }, index * 200);
          });
        }, 800);
        
        setTimeout(() => {
          const ctaButtons = entry.target.querySelectorAll('.btn-nav'); 
          ctaButtons.forEach((button, index) => {
            setTimeout(() => {
              button.classList.add('is-revealed');
            }, index * 200);
          });
        }, 1200);
      }
    });
  });

  sections.forEach(section => observer.observe(section));

  const carouselTrack = testimonialSection.querySelector('.carousel-track') as HTMLElement;
  const prevBtn = testimonialSection.querySelector('#prevBtnTestimonials') as HTMLButtonElement;
  const nextBtn = testimonialSection.querySelector('#nextBtnTestimonials') as HTMLButtonElement;
  const cards = testimonialSection.querySelectorAll('.testimonial-card') as NodeListOf<HTMLElement>;
  const carouselContainer = testimonialSection.querySelector('.carousel-container') as HTMLElement;

  if (!carouselTrack || !prevBtn || !nextBtn || !carouselContainer || cards.length === 0) {
    return;
  }

  let currentIndex = 0;
  let autoPlayInterval: number | null = null;

  function getCardsToShow(): number {
    if (window.innerWidth <= 768) return 1;
    if (window.innerWidth <= 1023) return 2;
    if (window.innerWidth <= 1279) return 3;
    return 4;
  }

  function getMaxIndex(): number {
    return Math.max(0, cards.length - getCardsToShow());
  }

  function updateCarousel(): void {
    const cardsToShow = getCardsToShow();
    
    if (cardsToShow === 1) {
      carouselTrack.style.transform = `translateX(-${currentIndex * 100}vw)`;
    } else {
      const cardWidth = cards[0].offsetWidth;
      let gap: number;
      if (cardsToShow === 2) gap = 24;
      else if (cardsToShow === 3) gap = 16;
      else gap = 16;
      
      const translateX = -(currentIndex * (cardWidth + gap));
      carouselTrack.style.transform = `translateX(${translateX}px)`;
    }
    
    const maxIndex = getMaxIndex();
    
    prevBtn.style.display = currentIndex === 0 ? 'none' : 'flex';
    nextBtn.style.display = currentIndex >= maxIndex ? 'none' : 'flex';
  }

  function goToSlide(index: number): void {
    const maxIndex = getMaxIndex();
    currentIndex = Math.max(0, Math.min(index, maxIndex));
    updateCarousel();
  }

  function nextSlide(): void {
    const maxIndex = getMaxIndex();
    if (currentIndex < maxIndex) {
      goToSlide(currentIndex + 1);
    } else {
      goToSlide(0); 
    }
  }

  function prevSlide(): void {
    if (currentIndex > 0) {
      goToSlide(currentIndex - 1);
    } else {
      goToSlide(getMaxIndex()); 
    }
  }

  function startAutoPlay(): void {
    if (autoPlayInterval) {
      clearInterval(autoPlayInterval);
    }
    
    autoPlayInterval = window.setInterval(() => {
      nextSlide();
    }, 4000);
  }

  function stopAutoPlay(): void {
    if (autoPlayInterval) {
      clearInterval(autoPlayInterval);
      autoPlayInterval = null;
    }
  }

  function resetAutoPlay(): void {
    stopAutoPlay();
    startAutoPlay();
  }

  prevBtn.addEventListener('click', (e: Event) => {
    e.preventDefault();
    prevSlide();
    resetAutoPlay();
  });

  nextBtn.addEventListener('click', (e: Event) => {
    e.preventDefault();
    nextSlide();
    resetAutoPlay();
  });

  carouselContainer.addEventListener('mouseenter', stopAutoPlay);
  carouselContainer.addEventListener('mouseleave', startAutoPlay);

  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      stopAutoPlay();
    } else {
      startAutoPlay();
    }
  });

  window.addEventListener('resize', () => {
    const maxIndex = getMaxIndex();
    
    if (currentIndex > maxIndex) {
      currentIndex = maxIndex;
    }
    
    updateCarousel();
    resetAutoPlay();
  });

  let touchStartX = 0;
  let touchEndX = 0;

  carouselContainer.addEventListener('touchstart', (e: TouchEvent) => {
    touchStartX = e.changedTouches[0].screenX;
    stopAutoPlay();
  });

  carouselContainer.addEventListener('touchend', (e: TouchEvent) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
    startAutoPlay();
  });

  function handleSwipe(): void {
    const swipeThreshold = 50;
    const swipeDistance = touchStartX - touchEndX;
    
    if (Math.abs(swipeDistance) > swipeThreshold) {
      if (swipeDistance > 0) {
        nextSlide();
      } else {
        prevSlide();
      }
    }
  }

  function equalizeHeights(): void {
    const testimonialContents = document.querySelectorAll('#Testimonials .testimonial-content') as NodeListOf<HTMLElement>;
    
    let maxHeight = 0;

    testimonialContents.forEach(content => {
      content.style.height = 'auto'; 
      maxHeight = Math.max(maxHeight, content.offsetHeight); 
    });

    testimonialContents.forEach(content => {
      content.style.height = maxHeight + 'px';
    });
  }

  window.addEventListener('resize', () => {
    if (window.innerWidth <= 1366) {
      equalizeHeights();
    } else {
      const testimonialContents = document.querySelectorAll('#Testimonials .testimonial-content') as NodeListOf<HTMLElement>;
      testimonialContents.forEach(content => content.style.height = 'auto');
    }
  });

  updateCarousel();
  startAutoPlay();
  equalizeHeights();
});
</script>